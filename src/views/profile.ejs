<%- include('partials/head') %>

<div class="layout">
  <%- include('partials/sidebar', { apps: [], currentApp: null }) %>

  <main class="main-content">
    <div class="page-header">
      <h1>Profile</h1>
      <span class="badge <%= user.plan === 'pro' ? 'badge-pro' : 'badge-free' %>"><%= user.plan === 'pro' ? 'PRO' : 'FREE' %></span>
    </div>

    <% if (error) { %><div class="alert alert-error"><%= error %></div><% } %>
    <% if (success) { %><div class="alert alert-success"><%= success %></div><% } %>

    <!-- Account Info -->
    <div class="section">
      <h2>Account</h2>
      <div class="card">
        <div class="form-group">
          <label>Email</label>
          <input type="email" value="<%= user.email %>" readonly style="opacity:0.6;cursor:not-allowed;" />
        </div>
        <div class="form-group" style="margin-bottom:0;">
          <label>Plan</label>
          <span class="badge <%= user.plan === 'pro' ? 'badge-pro' : 'badge-free' %>" style="font-size:13px;padding:4px 12px;"><%= user.plan === 'pro' ? 'Pro' : 'Free' %></span>
        </div>
      </div>
    </div>

    <!-- Personal Info -->
    <div class="section">
      <h2>Personal Info</h2>
      <div class="card">
        <form method="POST" action="/dashboard/profile">
          <div class="form-group">
            <label for="displayName">Display Name</label>
            <input type="text" id="displayName" name="displayName" value="<%= user.displayName || '' %>" placeholder="Your display name" />
          </div>
          <div class="form-group">
            <label for="firstName">First Name</label>
            <input type="text" id="firstName" name="firstName" value="<%= user.firstName || '' %>" placeholder="First name" />
          </div>
          <div class="form-group">
            <label for="lastName">Last Name</label>
            <input type="text" id="lastName" name="lastName" value="<%= user.lastName || '' %>" placeholder="Last name" />
          </div>
          <button type="submit" class="btn btn-neon">Save Changes</button>
        </form>
      </div>
    </div>

    <!-- Change Password -->
    <div class="section">
      <h2>Change Password</h2>
      <div class="card">
        <form method="POST" action="/dashboard/profile/password">
          <div class="form-group">
            <label for="currentPassword">Current Password</label>
            <input type="password" id="currentPassword" name="currentPassword" required placeholder="Enter current password" />
          </div>
          <div class="form-group">
            <label for="newPassword">New Password</label>
            <input type="password" id="newPassword" name="newPassword" required minlength="8" placeholder="Minimum 8 characters" />
          </div>
          <div class="form-group">
            <label for="confirmNewPassword">Confirm New Password</label>
            <input type="password" id="confirmNewPassword" name="confirmNewPassword" required minlength="8" placeholder="Confirm new password" />
          </div>
          <button type="submit" class="btn btn-outline">Change Password</button>
        </form>
      </div>
    </div>
  </main>
</div>

<%- include('partials/footer') %>
